<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="zc.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>钢铁快讯</title>
  </head>
  <body>
    <div class="container mt-4">
      <h1 id="biaoti">钢铁快讯输出平台</h1>
    </div>
    <!-- 主要快讯体内容 -->
    <div class="d-flex justify-content-center" id="output">
      <div class="bg-danger rounded-4 text-white p-3 m-4" style="width: 550px">
        <h2 class="mb-3" id="zxBiaoTi">测试文字</h2>
        <div class="bg-white rounded text-dark p-3">
          <p id="mainText" style="font-family: '得意黑'; margin-bottom: 0">
            这是一个多行注释的例子。 你可以在这里写很多行注释，
            它们都不会被JavaScript执行。
          </p>
        </div>
        <!-- div 内容 -->
        <p class="mt-3">
          This is a centered, red, rounded div with a fixed size.
        </p>
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <button id="shareButton">生成图片</button>
    </div>

    <script>
      // 从 localStorage 中读取数据
      /*const formData = JSON.parse(localStorage.getItem("formData"));

      if (formData) {
        const outputDiv = document.getElementById("output");
        outputDiv.innerHTML = `
        <div
        class="bg-danger rounded-4 text-white p-3 m-4"
        id="shareArea"
        style="width: 550px"
        >
        <h2 class="mb-3" id="zxBiaoTi">${formData.title}</h2>
        <div class="bg-white rounded text-dark p-3">
          <p id="mainText" style="font-family: '得意黑'; margin-bottom: 0">
            ${formData.content}
          </p>
        </div>
        <!-- div 内容 -->
        <p class="mt-3">
          This is a centered, red, rounded div with a fixed size.
        </p>
        </div>
        `;
      } else {
        const outputDiv = document.getElementById("output");
        outputDiv.innerHTML = "<p>没有找到任何信息。</p>";
      }
        */

      // 这块是生成图片逻辑
      document
        .getElementById("shareButton")
        .addEventListener("click", function () {
          html2canvas(document.getElementById("shareArea"), {
            scale: 3,
            logging: true,
            useCORS: true,
            allowTaint: false,
          }).then(function (canvas) {
            var imgDataURL = canvas.toDataURL("image/png");
            var a = document.createElement("a");
            a.href = imgDataURL;
            a.download = "shareImage.png";
            a.click();
          });
        });
    </script>
  </body>
</html>
